<!doctype html>
<html lang="en">
<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <title>Job Scheduling</title>
</head>
<body>
 <!-- Section: Design Block -->
 <section class="background-radial-gradient overflow-hidden">
  <style>
    .background-radial-gradient {
      background-color: hsl(218, 41%, 15%);
      background-image: radial-gradient(650px circle at 0% 0%,
        hsl(218, 41%, 35%) 15%,
        hsl(218, 41%, 30%) 35%,
        hsl(218, 41%, 20%) 75%,
        hsl(218, 41%, 19%) 80%,
        transparent 100%),
      radial-gradient(1250px circle at 100% 100%,
        hsl(218, 41%, 45%) 15%,
        hsl(218, 41%, 30%) 35%,
        hsl(218, 41%, 20%) 75%,
        hsl(218, 41%, 19%) 80%,
        transparent 100%);
    }

    #radius-shape-1 {
      height: 220px;
      width: 220px;
      top: -60px;
      left: -130px;
      background: radial-gradient(#44006b, #ad1fff);
      overflow: hidden;
    }

    #radius-shape-2 {
      border-radius: 38% 62% 63% 37% / 70% 33% 67% 30%;
      bottom: -60px;
      right: -110px;
      width: 300px;
      height: 300px;
      background: radial-gradient(#44006b, #ad1fff);
      overflow: hidden;
    }

    .bg-glass {
      background-color: hsla(0, 0%, 100%, 0.9) !important;
      backdrop-filter: saturate(200%) blur(25px);
    }
    input[type="text"],input[type="number"]::placeholder {
      text-align: center; 
    }
    
    input[type="text"],input[type="number"] {
      text-align: center; 
    }
  </style>

  <div class="container px-4 py-5 px-md-5 text-center text-lg-start my-5">
    <div class="row gx-lg-5 align-items-center mb-5 d-flex align-items-center justify-content-center">
      <div class="col-lg-6 mb-5 mb-lg-0" style="z-index: 10">
        <h1 class="my-5 display-5 fw-bold ls-tight" style="color: hsl(218, 81%, 95%)">
          We Schedule Your Jobs <br />
          <span style="color: hsl(218, 81%, 75%)">To Get Maximum Profit</span>
        </h1>
        <p class="mb-4 opacity-70" style="color: hsl(218, 81%, 85%)">

        </p>
      </div>

      <div class="col-lg-6 mb-5 mb-lg-0 position-relative">
        <div id="radius-shape-1" class="position-absolute rounded-circle shadow-5-strong"></div>
        <div id="radius-shape-2" class="position-absolute shadow-5-strong"></div>

        <div class="card bg-glass">
          <div class="card-body px-4 py-5 px-md-5">
            <form method="post" name="Form" onsubmit="return validateForm()" action="">
              <div class="form-group">
                <input type="text" class="form-control w-100" name="name" id="name" placeholder="Job Name" required>
              </div>
              
              <div class="form-group">
                <input type="number" class="form-control" name="deadline" id="deadline" placeholder="Deadline" required>
              </div>
              
              <!-- <div class="row"> -->
                <div class="form-group">
                  <input type="text" class="form-control" name="profit" id="profit" placeholder="Profit" required>
                </div>

                <!-- Submit button -->
                <div class="buttons d-flex mt-4">
                  <button id="Add" type="submit" onclick="AddRow()" class="btn btn-primary w-50 mr-2">
                    ADD
                  </button>
                  <button id="Clear" type="submit" onclick="ClearFields()" class="btn btn-danger w-50 ml-2">
                    CLEAR
                  </button>
                </div>

              </form>
            </div>
          </div>
        </div>

        <div class="card mt-5 w-100">
          <table class="table table-striped" id="show">
            <thead>
              <tr>
                <th>Job Name</th>
                <th>Deadline</th>
                <th>Profit</th>
              </tr>
            </thead>
          </table>    
        </div>


        <div class="buttons d-flex mt-4">
          <a href="#result">
            <button type="submit" onclick="Calculate()" id="calculate" class="btn btn-success w-100 pl-4 pr-4 pt-2 pb-2 me-4">
              CALCULATE
            </button>
          </a>
          <div class="mr-4"></div>
          <a href="/">
            <button type="submit" onclick="window.location.reload()" id="reset" class="btn btn-danger w-100 pl-4 pr-4 pt-2 pb-2">
              RESET
            </button>
          </a>
        </div>

      </div>
      <br>
      <div class="result" id="result">
        <div class="mb-1 mt-3">
          <h1 class="display-5 fw-bold ls-tight text-success" style="color: hsl(218, 81%, 95%)">
            Successful Jobs <br />
          </h1>
          <p class="mb-4 opacity-70" style="color: hsl(218, 81%, 85%)">

          </p>
        </div>
        <div class="card mt-3 w-100">
          <table class="table table-striped" id="show1">
            <thead>
              <tr>
                <th>Job Name</th>
                <th>Deadline</th>
                <th>Profit</th>
              </tr>
            </thead>
          </table>    
        </div>


        <div class="mb-1 mt-5">
          <h1 class="display-5 fw-bold ls-tight text-danger" style="color: hsl(218, 81%, 95%)">
            Failed Jobs <br />
          </h1>
          <p class="mb-4 opacity-70" style="color: hsl(218, 81%, 85%)">

          </p>
        </div>

        <div class="card mt-3 w-100">
          <table class="table table-striped" id="show2">
            <thead>
              <tr>
                <th>Job Name</th>
                <th>Deadline</th>
                <th>Profit</th>
              </tr>
            </thead>
          </table>    
        </div>
      </div>

      
    </div>
  </div>
</section>
<!-- Section: Design Block -->

<script>

function validateForm() {
    var name = document.forms["Form"]["name"].value;
    var deadline = document.forms["Form"]["deadline"].value;
    var profit = document.forms["Form"]["profit"].value;
    if (name == null || name == "", deadline == null || deadline == "", profit == null || profit == "") {
      alert("Please Fill All Required Field");
      return false;
    }
  }

  var calculate = document.getElementById('calculate');
  var reset = document.getElementById('reset');

  if (x == undefined) {
    calculate.disabled = true;
    reset.disabled = true;
  }

  window.onload = function() {
    document.getElementById('result').style.display = 'none';
  };

  class Job{
    constructor(name,deadline,profit){
      this.name = name;
      this.deadline = deadline;
      this.profit = profit;
    }
  }
  class Jobs{
    constructor(){
      this.jobs = [];
    }

    addJob(name,deadline,profit){
      let j = new Job(name,deadline,profit);
      this.jobs.push(j);
    }

    get allJobs(){
      return this.jobs;
    }
  }

    var greatest = 0;
    var jobsList = new Jobs();
    var n = 1;
    var x = 0;
    var countme = 0;

    function AddRow(){

      calculate.disabled = false;
      reset.disabled = false;

      var AddRown = document.getElementById('show');
      var NewRow = AddRown.insertRow(n);
      
      var name = document.getElementById("name").value;
      var deadline = document.getElementById("deadline").value;
      var profit = document.getElementById("profit").value;
      jobsList.addJob(name,deadline,profit);

      if(deadline > greatest){
        greatest = Number(deadline);
      }

      var cel1 = NewRow.insertCell(0);
      var cel2 = NewRow.insertCell(1);
      var cel3 = NewRow.insertCell(2);

      cel1.innerHTML = name;
      cel2.innerHTML = deadline;
      cel3.innerHTML = profit;

      n++;
      x++;

      document.getElementById("name").value = "";
      document.getElementById("deadline").value = "";
      document.getElementById("profit").value = "";
    }

    function ClearFields() {
      document.getElementById("name").value = "";
      document.getElementById("deadline").value = "";
      document.getElementById("profit").value = "";
    }

    function printJobScheduling(jobs, t){
    
    let n = jobs.length;

    jobs.sort(function(a,b){return b.profit - a.profit;})
    // for(let i=0;i<n;i++){
    //   for(let j = 0;j<(n - 1 - i);j++){
    //     if(jobs[j].profit < jobs[j + 1].profit){
    //       let temp = jobs[j];
    //       jobs[j] = jobs[j + 1];
    //       jobs[j + 1] = temp;
    //     }
    //   }
    // }

    let result = [];

    let succededJobs = new Jobs();
    let failedJobs = new Jobs();
    for(let i = 0;i<t;i++){
      succededJobs.addJob('-1',0,0);
      failedJobs.addJob('-1',0,0);
      result[i] = false;
    }
    var count = 0;
    var succeded = succededJobs.allJobs;
    var failed = failedJobs.allJobs;

    for(let i= 0;i<jobs.length;i++){

        var flag = false;
        for(let j = (t - 1, jobs[i].deadline - 1);j>=0;j--){

            if(result[j] == false){
              result[j] = true;
              flag = true;
              succeded[j].name = jobs[i].name;
              succeded[j].deadline = jobs[i].deadline;
              succeded[j].profit = jobs[i].profit;
              break;
            }
          }

          if(!flag){
            failed[count].name = jobs[i].name;
            failed[count].deadline = jobs[i].deadline;
            failed[count].profit = jobs[i].profit;
            count++;
          }
        }

        var n1 = 1;
        var totalProfit = 0;
        for(let i = 0;i < succeded.length;i++){
          if(succeded[i].deadline != 0){
            var AddRown = document.getElementById('show1');
            var NewRow = AddRown.insertRow(n1);

            var cel1 = NewRow.insertCell(0);
            var cel2 = NewRow.insertCell(1);
            var cel3 = NewRow.insertCell(2);

            cel1.innerHTML = succeded[i].name;
            cel2.innerHTML = succeded[i].deadline;
            cel3.innerHTML = succeded[i].profit;
            totalProfit = totalProfit + Number(succeded[i].profit);
            n1++;
          }

        }

            var AddRown = document.getElementById('show1');
            var NewRow = AddRown.insertRow(n1);

            var cel1 = NewRow.insertCell(0);
            var cel2 = NewRow.insertCell(1);
            var cel3 = NewRow.insertCell(2);

            // cel1.innerHTML = succeded[i].name;
            cel2.innerHTML = '<b>Total Profit</b>'
            cel3.innerHTML = totalProfit;
            n1++;



        var n2 = 1;
        for(let i = 0;i < failed.length;i++){
          if(failed[i].deadline != 0){
            var AddRown = document.getElementById('show2');
            var NewRow = AddRown.insertRow(n2);

            var cel1 = NewRow.insertCell(0);
            var cel2 = NewRow.insertCell(1);
            var cel3 = NewRow.insertCell(2);

            cel1.innerHTML = failed[i].name;
            cel2.innerHTML = failed[i].deadline;
            cel3.innerHTML = failed[i].profit;
            n2++;
          }

        }

      }

      function Calculate(){
        document.getElementById('Add').disabled = true;
        document.getElementById('Clear').disabled = true;
        printJobScheduling(jobsList.allJobs,greatest);
        document.getElementById('result').style.display = "block";

      }


    </script>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </body>
  </html>
